<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>sentiment analysis</title>
<link rel="stylesheet" href="../css/main.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  
  <style>

.ui-helper-hidden-accessible{
    display: none;
}

#divID{
  margin-top:20px;
  }
  
  .block{
  text-align:center;
  margin-right: 3px;
  display: inline-block;
  }
  
 #customRange1{
 margin-top:20px;
 }
 
 
</style>
  
</head>
<body>
<div class="card">
  <div class="card-body">
    <h4 class="card-title">sentiment analysis</h4>
    <p class="card-text">Sentiment Analysis is the task of interpreting and classifying emotions (positive or negative) in the input text.</p>
    
    <!-- model  -->
	  <button class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Models</button>
    <div class="dropdown-menu" style="">
      <a class="dropdown-item" href="#">Action</a>
      <a class="dropdown-item" href="#">Another action</a>
      <a class="dropdown-item" href="#">Something else here</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="#">Separated link</a>
    </div>

	<!-- navbar -->
    <ul class="nav nav-tabs" style = "margin-top: 30px;">
  <li class="nav-item">
    <a class="nav-link active" data-bs-toggle="tab" href="#home">Demo</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-bs-toggle="tab" href="#profile" style = "visibility: hidden">Model Card</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-bs-toggle="tab" href="#profile" style = "visibility: hidden">Model Usage</a>
  </li>
</ul>

<div id="myTabContent" class="tab-content">
  <div class="tab-pane fade show active" id="home">
      <div class="form-group">
		  <label class="col-form-label mt-4" for="inputDefault">Sentence</label>
		  <input type="text" class="form-control" placeholder="Default input" id="sentence">
		</div>
    <button type="submit" class="btn btn-primary" onclick = "connect();" style = "margin-top:20px;">Submit</button>
    <div id = "divID"></div>
  </div>
</div>

  </div>
</div>
  <script>
  
  function geth(obj) {
	  console.log(obj);
	  var depth = 0;
	  var k = obj.children;
	  console.log(k);
	  for (let i = 0; i < k.length; i++) {
	      var tmpDepth = geth(k[i]);
	      if (tmpDepth > depth) {
	          depth = tmpDepth;
	      }
	  }
	  return 1 + depth;
	}
  

  function enforceBounds(x) {
      if (x < 0) {
          return 0;
      } else if (x > 1){
          return 1;
      } else {
          return x;
      }
  }

	  
  var coolwarm = [[0.000, [0.230, 0.299, 0.754]], [0.002, [0.230, 0.299, 0.754]], [0.004, [0.234, 0.306, 0.760]], [0.006, [0.234, 0.306, 0.760]], [0.008, [0.239, 0.312, 0.766]], [0.010, [0.239, 0.312, 0.766]], [0.012, [0.244, 0.319, 0.772]], [0.014, [0.244, 0.319, 0.772]], [0.016, [0.248, 0.326, 0.778]], [0.018, [0.248, 0.326, 0.778]], [0.020, [0.253, 0.333, 0.784]], [0.022, [0.253, 0.333, 0.784]], [0.023, [0.257, 0.340, 0.790]], [0.025, [0.257, 0.340, 0.790]], [0.027, [0.262, 0.346, 0.796]], [0.029, [0.262, 0.346, 0.796]], [0.031, [0.266, 0.353, 0.802]], [0.033, [0.266, 0.353, 0.802]], [0.035, [0.271, 0.360, 0.807]], [0.037, [0.271, 0.360, 0.807]], [0.039, [0.276, 0.367, 0.813]], [0.041, [0.276, 0.367, 0.813]], [0.043, [0.281, 0.373, 0.818]], [0.045, [0.281, 0.373, 0.818]], [0.047, [0.285, 0.380, 0.823]], [0.049, [0.285, 0.380, 0.823]], [0.051, [0.290, 0.387, 0.829]], [0.053, [0.290, 0.387, 0.829]], [0.055, [0.295, 0.394, 0.834]], [0.057, [0.295, 0.394, 0.834]], [0.059, [0.299, 0.400, 0.840]], [0.061, [0.299, 0.400, 0.840]], [0.063, [0.304, 0.407, 0.845]], [0.065, [0.304, 0.407, 0.845]], [0.067, [0.309, 0.413, 0.850]], [0.068, [0.309, 0.413, 0.850]], [0.070, [0.314, 0.420, 0.855]], [0.072, [0.314, 0.420, 0.855]], [0.074, [0.319, 0.427, 0.860]], [0.076, [0.319, 0.427, 0.860]], [0.078, [0.324, 0.433, 0.865]], [0.080, [0.324, 0.433, 0.865]], [0.082, [0.329, 0.440, 0.870]], [0.084, [0.329, 0.440, 0.870]], [0.086, [0.333, 0.446, 0.874]], [0.088, [0.333, 0.446, 0.874]], [0.090, [0.338, 0.453, 0.879]], [0.092, [0.338, 0.453, 0.879]], [0.094, [0.343, 0.459, 0.884]], [0.096, [0.343, 0.459, 0.884]], [0.098, [0.348, 0.466, 0.888]], [0.100, [0.348, 0.466, 0.888]], [0.102, [0.353, 0.472, 0.893]], [0.104, [0.353, 0.472, 0.893]], [0.106, [0.358, 0.478, 0.897]], [0.108, [0.358, 0.478, 0.897]], [0.110, [0.363, 0.485, 0.901]], [0.112, [0.363, 0.485, 0.901]], [0.114, [0.369, 0.491, 0.905]], [0.115, [0.369, 0.491, 0.905]], [0.117, [0.374, 0.497, 0.909]], [0.119, [0.374, 0.497, 0.909]], [0.121, [0.379, 0.504, 0.914]], [0.123, [0.379, 0.504, 0.914]], [0.125, [0.384, 0.510, 0.918]], [0.127, [0.384, 0.510, 0.918]], [0.129, [0.389, 0.516, 0.921]], [0.131, [0.389, 0.516, 0.921]], [0.133, [0.394, 0.522, 0.925]], [0.135, [0.394, 0.522, 0.925]], [0.137, [0.399, 0.529, 0.928]], [0.139, [0.399, 0.529, 0.928]], [0.141, [0.404, 0.535, 0.932]], [0.143, [0.404, 0.535, 0.932]], [0.145, [0.410, 0.541, 0.936]], [0.147, [0.410, 0.541, 0.936]], [0.149, [0.415, 0.547, 0.939]], [0.151, [0.415, 0.547, 0.939]], [0.153, [0.420, 0.553, 0.943]], [0.155, [0.420, 0.553, 0.943]], [0.157, [0.425, 0.559, 0.946]], [0.159, [0.425, 0.559, 0.946]], [0.160, [0.431, 0.565, 0.949]], [0.162, [0.431, 0.565, 0.949]], [0.164, [0.436, 0.571, 0.952]], [0.166, [0.436, 0.571, 0.952]], [0.168, [0.441, 0.577, 0.955]], [0.170, [0.441, 0.577, 0.955]], [0.172, [0.446, 0.582, 0.957]], [0.174, [0.446, 0.582, 0.957]], [0.176, [0.452, 0.588, 0.960]], [0.178, [0.452, 0.588, 0.960]], [0.180, [0.457, 0.594, 0.963]], [0.182, [0.457, 0.594, 0.963]], [0.184, [0.462, 0.600, 0.966]], [0.186, [0.462, 0.600, 0.966]], [0.188, [0.468, 0.606, 0.969]], [0.190, [0.468, 0.606, 0.969]], [0.192, [0.473, 0.611, 0.971]], [0.194, [0.473, 0.611, 0.971]], [0.196, [0.478, 0.617, 0.973]], [0.198, [0.478, 0.617, 0.973]], [0.200, [0.484, 0.622, 0.975]], [0.202, [0.484, 0.622, 0.975]], [0.204, [0.489, 0.628, 0.977]], [0.205, [0.489, 0.628, 0.977]], [0.207, [0.495, 0.633, 0.979]], [0.209, [0.495, 0.633, 0.979]], [0.211, [0.500, 0.639, 0.981]], [0.213, [0.500, 0.639, 0.981]], [0.215, [0.505, 0.644, 0.983]], [0.217, [0.505, 0.644, 0.983]], [0.219, [0.511, 0.649, 0.985]], [0.221, [0.511, 0.649, 0.985]], [0.223, [0.516, 0.654, 0.986]], [0.225, [0.516, 0.654, 0.986]], [0.227, [0.522, 0.660, 0.988]], [0.229, [0.522, 0.660, 0.988]], [0.231, [0.527, 0.665, 0.989]], [0.233, [0.527, 0.665, 0.989]], [0.235, [0.533, 0.670, 0.990]], [0.237, [0.533, 0.670, 0.990]], [0.239, [0.538, 0.675, 0.992]], [0.241, [0.538, 0.675, 0.992]], [0.243, [0.543, 0.680, 0.993]], [0.245, [0.543, 0.680, 0.993]], [0.247, [0.549, 0.685, 0.994]], [0.249, [0.549, 0.685, 0.994]], [0.250, [0.554, 0.690, 0.996]], [0.252, [0.554, 0.690, 0.996]], [0.254, [0.560, 0.695, 0.996]], [0.256, [0.560, 0.695, 0.996]], [0.258, [0.565, 0.699, 0.997]], [0.260, [0.565, 0.699, 0.997]], [0.262, [0.571, 0.704, 0.997]], [0.264, [0.571, 0.704, 0.997]], [0.266, [0.576, 0.709, 0.998]], [0.268, [0.576, 0.709, 0.998]], [0.270, [0.581, 0.713, 0.998]], [0.272, [0.581, 0.713, 0.998]], [0.274, [0.587, 0.718, 0.999]], [0.276, [0.587, 0.718, 0.999]], [0.278, [0.592, 0.723, 0.999]], [0.280, [0.592, 0.723, 0.999]], [0.282, [0.598, 0.727, 1.000]], [0.284, [0.598, 0.727, 1.000]], [0.286, [0.603, 0.732, 1.000]], [0.288, [0.603, 0.732, 1.000]], [0.290, [0.609, 0.736, 0.999]], [0.292, [0.609, 0.736, 0.999]], [0.294, [0.614, 0.740, 0.999]], [0.295, [0.614, 0.740, 0.999]], [0.297, [0.619, 0.744, 0.999]], [0.299, [0.619, 0.744, 0.999]], [0.301, [0.625, 0.748, 0.999]], [0.303, [0.625, 0.748, 0.999]], [0.305, [0.630, 0.753, 0.999]], [0.307, [0.630, 0.753, 0.999]], [0.309, [0.635, 0.757, 0.998]], [0.311, [0.635, 0.757, 0.998]], [0.313, [0.641, 0.761, 0.998]], [0.315, [0.641, 0.761, 0.998]], [0.317, [0.646, 0.764, 0.997]], [0.319, [0.646, 0.764, 0.997]], [0.321, [0.651, 0.768, 0.996]], [0.323, [0.651, 0.768, 0.996]], [0.325, [0.657, 0.772, 0.995]], [0.327, [0.657, 0.772, 0.995]], [0.329, [0.662, 0.775, 0.994]], [0.331, [0.662, 0.775, 0.994]], [0.333, [0.667, 0.779, 0.993]], [0.335, [0.667, 0.779, 0.993]], [0.337, [0.673, 0.783, 0.992]], [0.339, [0.673, 0.783, 0.992]], [0.341, [0.678, 0.787, 0.991]], [0.342, [0.678, 0.787, 0.991]], [0.344, [0.683, 0.790, 0.990]], [0.346, [0.683, 0.790, 0.990]], [0.348, [0.688, 0.793, 0.988]], [0.350, [0.688, 0.793, 0.988]], [0.352, [0.693, 0.796, 0.986]], [0.354, [0.693, 0.796, 0.986]], [0.356, [0.698, 0.799, 0.985]], [0.358, [0.698, 0.799, 0.985]], [0.360, [0.704, 0.803, 0.983]], [0.362, [0.704, 0.803, 0.983]], [0.364, [0.709, 0.806, 0.981]], [0.366, [0.709, 0.806, 0.981]], [0.368, [0.714, 0.809, 0.979]], [0.370, [0.714, 0.809, 0.979]], [0.372, [0.719, 0.812, 0.978]], [0.374, [0.719, 0.812, 0.978]], [0.376, [0.724, 0.815, 0.976]], [0.378, [0.724, 0.815, 0.976]], [0.380, [0.729, 0.817, 0.973]], [0.382, [0.729, 0.817, 0.973]], [0.384, [0.734, 0.820, 0.971]], [0.386, [0.734, 0.820, 0.971]], [0.387, [0.739, 0.823, 0.968]], [0.389, [0.739, 0.823, 0.968]], [0.391, [0.744, 0.825, 0.966]], [0.393, [0.744, 0.825, 0.966]], [0.395, [0.749, 0.828, 0.963]], [0.397, [0.749, 0.828, 0.963]], [0.399, [0.754, 0.830, 0.961]], [0.401, [0.754, 0.830, 0.961]], [0.403, [0.759, 0.833, 0.958]], [0.405, [0.759, 0.833, 0.958]], [0.407, [0.763, 0.835, 0.956]], [0.409, [0.763, 0.835, 0.956]], [0.411, [0.768, 0.837, 0.952]], [0.413, [0.768, 0.837, 0.952]], [0.415, [0.773, 0.839, 0.949]], [0.417, [0.773, 0.839, 0.949]], [0.419, [0.777, 0.841, 0.946]], [0.421, [0.777, 0.841, 0.946]], [0.423, [0.782, 0.843, 0.943]], [0.425, [0.782, 0.843, 0.943]], [0.427, [0.787, 0.845, 0.940]], [0.429, [0.787, 0.845, 0.940]], [0.431, [0.791, 0.847, 0.937]], [0.432, [0.791, 0.847, 0.937]], [0.434, [0.796, 0.849, 0.933]], [0.436, [0.796, 0.849, 0.933]], [0.438, [0.801, 0.850, 0.930]], [0.440, [0.801, 0.850, 0.930]], [0.442, [0.805, 0.852, 0.926]], [0.444, [0.805, 0.852, 0.926]], [0.446, [0.809, 0.853, 0.922]], [0.448, [0.809, 0.853, 0.922]], [0.450, [0.814, 0.854, 0.918]], [0.452, [0.814, 0.854, 0.918]], [0.454, [0.818, 0.856, 0.915]], [0.456, [0.818, 0.856, 0.915]], [0.458, [0.822, 0.857, 0.911]], [0.460, [0.822, 0.857, 0.911]], [0.462, [0.827, 0.858, 0.907]], [0.464, [0.827, 0.858, 0.907]], [0.466, [0.831, 0.860, 0.903]], [0.468, [0.831, 0.860, 0.903]], [0.470, [0.835, 0.861, 0.899]], [0.472, [0.835, 0.861, 0.899]], [0.474, [0.839, 0.861, 0.894]], [0.476, [0.839, 0.861, 0.894]], [0.477, [0.843, 0.862, 0.890]], [0.479, [0.843, 0.862, 0.890]], [0.481, [0.847, 0.862, 0.886]], [0.483, [0.847, 0.862, 0.886]], [0.485, [0.851, 0.863, 0.881]], [0.487, [0.851, 0.863, 0.881]], [0.489, [0.855, 0.864, 0.877]], [0.491, [0.855, 0.864, 0.877]], [0.493, [0.859, 0.864, 0.872]], [0.495, [0.859, 0.864, 0.872]], [0.497, [0.863, 0.865, 0.868]], [0.499, [0.863, 0.865, 0.868]], [0.501, [0.867, 0.864, 0.863]], [0.503, [0.867, 0.864, 0.863]], [0.505, [0.871, 0.862, 0.857]], [0.507, [0.871, 0.862, 0.857]], [0.509, [0.876, 0.860, 0.851]], [0.511, [0.876, 0.860, 0.851]], [0.513, [0.880, 0.858, 0.846]], [0.515, [0.880, 0.858, 0.846]], [0.517, [0.884, 0.856, 0.840]], [0.519, [0.884, 0.856, 0.840]], [0.521, [0.888, 0.854, 0.835]], [0.523, [0.888, 0.854, 0.835]], [0.524, [0.892, 0.852, 0.829]], [0.526, [0.892, 0.852, 0.829]], [0.528, [0.896, 0.850, 0.823]], [0.530, [0.896, 0.850, 0.823]], [0.532, [0.900, 0.848, 0.818]], [0.534, [0.900, 0.848, 0.818]], [0.536, [0.903, 0.845, 0.812]], [0.538, [0.903, 0.845, 0.812]], [0.540, [0.906, 0.842, 0.806]], [0.542, [0.906, 0.842, 0.806]], [0.544, [0.909, 0.839, 0.800]], [0.546, [0.909, 0.839, 0.800]], [0.548, [0.913, 0.837, 0.795]], [0.550, [0.913, 0.837, 0.795]], [0.552, [0.916, 0.834, 0.789]], [0.554, [0.916, 0.834, 0.789]], [0.556, [0.919, 0.831, 0.783]], [0.558, [0.919, 0.831, 0.783]], [0.560, [0.923, 0.829, 0.777]], [0.562, [0.923, 0.829, 0.777]], [0.564, [0.926, 0.826, 0.771]], [0.566, [0.926, 0.826, 0.771]], [0.568, [0.928, 0.822, 0.765]], [0.569, [0.928, 0.822, 0.765]], [0.571, [0.931, 0.819, 0.759]], [0.573, [0.931, 0.819, 0.759]], [0.575, [0.933, 0.816, 0.753]], [0.577, [0.933, 0.816, 0.753]], [0.579, [0.936, 0.812, 0.747]], [0.581, [0.936, 0.812, 0.747]], [0.583, [0.938, 0.809, 0.741]], [0.585, [0.938, 0.809, 0.741]], [0.587, [0.941, 0.806, 0.735]], [0.589, [0.941, 0.806, 0.735]], [0.591, [0.943, 0.802, 0.729]], [0.593, [0.943, 0.802, 0.729]], [0.595, [0.946, 0.799, 0.723]], [0.597, [0.946, 0.799, 0.723]], [0.599, [0.947, 0.795, 0.717]], [0.601, [0.947, 0.795, 0.717]], [0.603, [0.949, 0.791, 0.711]], [0.605, [0.949, 0.791, 0.711]], [0.607, [0.951, 0.787, 0.705]], [0.609, [0.951, 0.787, 0.705]], [0.611, [0.953, 0.783, 0.699]], [0.613, [0.953, 0.783, 0.699]], [0.614, [0.955, 0.779, 0.693]], [0.616, [0.955, 0.779, 0.693]], [0.618, [0.956, 0.775, 0.686]], [0.620, [0.956, 0.775, 0.686]], [0.622, [0.958, 0.771, 0.680]], [0.624, [0.958, 0.771, 0.680]], [0.626, [0.960, 0.767, 0.674]], [0.628, [0.960, 0.767, 0.674]], [0.630, [0.961, 0.763, 0.668]], [0.632, [0.961, 0.763, 0.668]], [0.634, [0.962, 0.758, 0.662]], [0.636, [0.962, 0.758, 0.662]], [0.638, [0.963, 0.754, 0.656]], [0.640, [0.963, 0.754, 0.656]], [0.642, [0.964, 0.749, 0.649]], [0.644, [0.964, 0.749, 0.649]], [0.646, [0.965, 0.745, 0.643]], [0.648, [0.965, 0.745, 0.643]], [0.650, [0.966, 0.740, 0.637]], [0.652, [0.966, 0.740, 0.637]], [0.654, [0.967, 0.736, 0.631]], [0.656, [0.967, 0.736, 0.631]], [0.658, [0.968, 0.731, 0.625]], [0.659, [0.968, 0.731, 0.625]], [0.661, [0.968, 0.726, 0.618]], [0.663, [0.968, 0.726, 0.618]], [0.665, [0.968, 0.721, 0.612]], [0.667, [0.968, 0.721, 0.612]], [0.669, [0.969, 0.716, 0.606]], [0.671, [0.969, 0.716, 0.606]], [0.673, [0.969, 0.711, 0.600]], [0.675, [0.969, 0.711, 0.600]], [0.677, [0.969, 0.706, 0.594]], [0.679, [0.969, 0.706, 0.594]], [0.681, [0.970, 0.701, 0.588]], [0.683, [0.970, 0.701, 0.588]], [0.685, [0.970, 0.696, 0.581]], [0.687, [0.970, 0.696, 0.581]], [0.689, [0.970, 0.690, 0.575]], [0.691, [0.970, 0.690, 0.575]], [0.693, [0.969, 0.685, 0.569]], [0.695, [0.969, 0.685, 0.569]], [0.697, [0.969, 0.679, 0.563]], [0.699, [0.969, 0.679, 0.563]], [0.701, [0.968, 0.674, 0.557]], [0.703, [0.968, 0.674, 0.557]], [0.705, [0.968, 0.668, 0.550]], [0.706, [0.968, 0.668, 0.550]], [0.708, [0.968, 0.663, 0.544]], [0.710, [0.968, 0.663, 0.544]], [0.712, [0.967, 0.657, 0.538]], [0.714, [0.967, 0.657, 0.538]], [0.716, [0.967, 0.652, 0.532]], [0.718, [0.967, 0.652, 0.532]], [0.720, [0.966, 0.646, 0.526]], [0.722, [0.966, 0.646, 0.526]], [0.724, [0.965, 0.640, 0.520]], [0.726, [0.965, 0.640, 0.520]], [0.728, [0.964, 0.634, 0.514]], [0.730, [0.964, 0.634, 0.514]], [0.732, [0.963, 0.628, 0.508]], [0.734, [0.963, 0.628, 0.508]], [0.736, [0.962, 0.622, 0.502]], [0.738, [0.962, 0.622, 0.502]], [0.740, [0.960, 0.616, 0.495]], [0.742, [0.960, 0.616, 0.495]], [0.744, [0.959, 0.610, 0.489]], [0.746, [0.959, 0.610, 0.489]], [0.748, [0.958, 0.604, 0.483]], [0.750, [0.958, 0.604, 0.483]], [0.751, [0.957, 0.598, 0.477]], [0.753, [0.957, 0.598, 0.477]], [0.755, [0.955, 0.592, 0.471]], [0.757, [0.955, 0.592, 0.471]], [0.759, [0.953, 0.585, 0.465]], [0.761, [0.953, 0.585, 0.465]], [0.763, [0.951, 0.579, 0.459]], [0.765, [0.951, 0.579, 0.459]], [0.767, [0.949, 0.572, 0.453]], [0.769, [0.949, 0.572, 0.453]], [0.771, [0.948, 0.566, 0.447]], [0.773, [0.948, 0.566, 0.447]], [0.775, [0.946, 0.560, 0.442]], [0.777, [0.946, 0.560, 0.442]], [0.779, [0.944, 0.553, 0.436]], [0.781, [0.944, 0.553, 0.436]], [0.783, [0.942, 0.546, 0.430]], [0.785, [0.942, 0.546, 0.430]], [0.787, [0.939, 0.540, 0.424]], [0.789, [0.939, 0.540, 0.424]], [0.791, [0.937, 0.533, 0.418]], [0.793, [0.937, 0.533, 0.418]], [0.795, [0.934, 0.526, 0.412]], [0.796, [0.934, 0.526, 0.412]], [0.798, [0.932, 0.519, 0.406]], [0.800, [0.932, 0.519, 0.406]], [0.802, [0.929, 0.512, 0.401]], [0.804, [0.929, 0.512, 0.401]], [0.806, [0.927, 0.505, 0.395]], [0.808, [0.927, 0.505, 0.395]], [0.810, [0.924, 0.499, 0.389]], [0.812, [0.924, 0.499, 0.389]], [0.814, [0.921, 0.491, 0.383]], [0.816, [0.921, 0.491, 0.383]], [0.818, [0.918, 0.484, 0.378]], [0.820, [0.918, 0.484, 0.378]], [0.822, [0.915, 0.477, 0.372]], [0.824, [0.915, 0.477, 0.372]], [0.826, [0.912, 0.470, 0.367]], [0.828, [0.912, 0.470, 0.367]], [0.830, [0.909, 0.462, 0.361]], [0.832, [0.909, 0.462, 0.361]], [0.834, [0.906, 0.455, 0.355]], [0.836, [0.906, 0.455, 0.355]], [0.838, [0.903, 0.448, 0.350]], [0.840, [0.903, 0.448, 0.350]], [0.841, [0.900, 0.441, 0.344]], [0.843, [0.900, 0.441, 0.344]], [0.845, [0.896, 0.433, 0.339]], [0.847, [0.896, 0.433, 0.339]], [0.849, [0.892, 0.425, 0.333]], [0.851, [0.892, 0.425, 0.333]], [0.853, [0.888, 0.418, 0.328]], [0.855, [0.888, 0.418, 0.328]], [0.857, [0.885, 0.410, 0.323]], [0.859, [0.885, 0.410, 0.323]], [0.861, [0.881, 0.402, 0.317]], [0.863, [0.881, 0.402, 0.317]], [0.865, [0.877, 0.395, 0.312]], [0.867, [0.877, 0.395, 0.312]], [0.869, [0.873, 0.387, 0.306]], [0.871, [0.873, 0.387, 0.306]], [0.873, [0.870, 0.379, 0.301]], [0.875, [0.870, 0.379, 0.301]], [0.877, [0.865, 0.371, 0.296]], [0.879, [0.865, 0.371, 0.296]], [0.881, [0.861, 0.363, 0.291]], [0.883, [0.861, 0.363, 0.291]], [0.885, [0.857, 0.355, 0.285]], [0.886, [0.857, 0.355, 0.285]], [0.888, [0.852, 0.346, 0.280]], [0.890, [0.852, 0.346, 0.280]], [0.892, [0.848, 0.338, 0.275]], [0.894, [0.848, 0.338, 0.275]], [0.896, [0.844, 0.330, 0.270]], [0.898, [0.844, 0.330, 0.270]], [0.900, [0.839, 0.322, 0.265]], [0.902, [0.839, 0.322, 0.265]], [0.904, [0.835, 0.314, 0.260]], [0.906, [0.835, 0.314, 0.260]], [0.908, [0.830, 0.305, 0.255]], [0.910, [0.830, 0.305, 0.255]], [0.912, [0.825, 0.296, 0.250]], [0.914, [0.825, 0.296, 0.250]], [0.916, [0.820, 0.287, 0.245]], [0.918, [0.820, 0.287, 0.245]], [0.920, [0.816, 0.278, 0.240]], [0.922, [0.816, 0.278, 0.240]], [0.924, [0.811, 0.269, 0.235]], [0.926, [0.811, 0.269, 0.235]], [0.928, [0.806, 0.260, 0.231]], [0.930, [0.806, 0.260, 0.231]], [0.932, [0.801, 0.251, 0.226]], [0.933, [0.801, 0.251, 0.226]], [0.935, [0.796, 0.242, 0.221]], [0.937, [0.796, 0.242, 0.221]], [0.939, [0.791, 0.231, 0.216]], [0.941, [0.791, 0.231, 0.216]], [0.943, [0.785, 0.221, 0.212]], [0.945, [0.785, 0.221, 0.212]], [0.947, [0.780, 0.210, 0.207]], [0.949, [0.780, 0.210, 0.207]], [0.951, [0.774, 0.200, 0.203]], [0.953, [0.774, 0.200, 0.203]], [0.955, [0.769, 0.189, 0.198]], [0.957, [0.769, 0.189, 0.198]], [0.959, [0.764, 0.179, 0.193]], [0.961, [0.764, 0.179, 0.193]], [0.963, [0.758, 0.168, 0.189]], [0.965, [0.758, 0.168, 0.189]], [0.967, [0.753, 0.158, 0.184]], [0.969, [0.753, 0.158, 0.184]], [0.971, [0.747, 0.140, 0.180]], [0.973, [0.747, 0.140, 0.180]], [0.975, [0.741, 0.122, 0.176]], [0.977, [0.741, 0.122, 0.176]], [0.978, [0.735, 0.104, 0.171]], [0.980, [0.735, 0.104, 0.171]], [0.982, [0.729, 0.087, 0.167]], [0.984, [0.729, 0.087, 0.167]], [0.986, [0.723, 0.069, 0.163]], [0.988, [0.723, 0.069, 0.163]], [0.990, [0.717, 0.051, 0.159]], [0.992, [0.717, 0.051, 0.159]], [0.994, [0.712, 0.033, 0.154]], [0.996, [0.712, 0.033, 0.154]], [0.998, [0.706, 0.016, 0.150]], [1.000, [0.706, 0.016, 0.150]]];
  
	  function getColor(x, values) {

          // Split values into four list
		  if(x > -5 || x < 5){
        	  var temp = (x+5)/10;
        	  x = 0.25+temp*0.5
        	
          }
          else if (x > 10){
        	  x = 1;
          }
          else if(x < -10){
        	  x = 0;
          }
          else{
        	  x = (x+10)/20;
          }
          
          
          
          var x_values = [];
          var r_values = [];
          var g_values = [];
          var b_values = [];
          for (i in values) {
              x_values.push(values[i][0]);
              r_values.push(values[i][1][0]);
              g_values.push(values[i][1][1]);
              b_values.push(values[i][1][2]);
          }

          var i = 1;
          while (x_values[i] < x) {
              i = i+1;
          }
          i = i-1;

          var width = Math.abs(x_values[i] - x_values[i+1]);
          var scaling_factor = (x - x_values[i]) / width;

          // Get the new color values though interpolation
          var r = r_values[i] + scaling_factor * (r_values[i+1] - r_values[i])
          var g = g_values[i] + scaling_factor * (g_values[i+1] - g_values[i])
          var b = b_values[i] + scaling_factor * (b_values[i+1] - b_values[i])

          return [enforceBounds(r), enforceBounds(g), enforceBounds(b)];

      }

  
  function traversehelper1(array, o, count, temp){
	  var t = count-1;
	  if(count == temp){
      	array.push(o.name + ":" + o.importance);
      	return;
      }
	  else if (o.children.length == 0){
		  array.push("L " + o.name + ":" + o.importance);
	  }
	  temp++;
	  for(let j = 0; j < o.children.length; j++){
	          traversehelper1(array, o.children[j], count, temp);	      
	  }
  }

	function traverse1(o, count) {
		var array = [];
		var temp = 1;
		var name = o.name;
		temp++;
		if(count == 1){
			array[0] = o.name + ":" + o.importance;
		}
		else{
			 for (let i = 0; i < o.children.length; i++) {
			        traversehelper1(array, o.children[i], count, temp);
			    }
		}
	    console.log(array);
	    var temp = [];
	    for(let m = 0; m < array.length; m++){
	    	var arr = array[m].split(":");
	    	var ar = arr[0].split(" ");
	    	if(ar[0] != "L"){
	    		$('<div class="block" id = '+arr[1]+' data-toggle="tooltip" data-placement="top" title="'+Number(arr[1]).toPrecision(3)+'"> '+arr[0]+'</div>').appendTo('#div2');
				var color = getColor(Number(arr[1]), coolwarm);
				console.log(color);
				r = Math.round(255*color[0]);
				g = Math.round(255*color[1]);
				b = Math.round(255*color[2]);
			   document.getElementById(arr[1]).style.backgroundColor = "rgb(" + r + "," + g + "," + b + ")";
	    	}
	    	else{
	    		var newElement = document.createElement('div');
	    		$('<div class="block" id = '+arr[1]+' data-toggle="tooltip" data-placement="top" title="'+Number(arr[1]).toPrecision(3)+'"> '+ar[1]+'</div>').appendTo('#div2');
				var color = getColor(Number(arr[1]), coolwarm);
				var color = getColor(Number(arr[1]), coolwarm);
				console.log(color);
				r = Math.round(255*color[0]);
				g = Math.round(255*color[1]);
				b = Math.round(255*color[2]);
			   document.getElementById(arr[1]).style.backgroundColor = "rgb(" + r + "," + g + "," + b + ")";
			   document.getElementById(arr[1]).style.opacity = "0.5";
	    		
	    	}
			
	    }
	    $("[data-toggle='tooltip']").tooltip();
	    return temp;

	}
	
	//that's all... no magic, no bloated framework
  function connect(){
		var words;
		var json;
	  var div = document.getElementById('divID');
	  div.innerHTML = "";
	  var div1 = document.createElement('div');
	  div1.className = "div1";
	  div1.id = "div1"
	  div.appendChild(div1);
	  var divinfo = document.createElement('div');
	  divinfo.id = "info";
	  divinfo.innerHTML = "<span id = \"info\" style = \"border-left: 5px solid rgb(48,62,84);\">The color on each label visually represents its importance score. A </span><span style = \"color:red\"> Red(RGB(255, 0, 0)) </span><span>label indicates an importance score <br> greater than 10 and a </span><span style = \"color:blue\">Blue (RGB(0, 0, 255)) </span><span>indicates an importance score less than -10. </span>";
	  divinfo.style.display = "inline-block;";
	  divinfo.style.backgroundColor ="rgb(233,239,240)";
	  divinfo.style.marginBottom = "30px";
	  div1.appendChild(divinfo);
	  var div2 = document.createElement('div');
	  div2.id = "div2";
	  div1.appendChild(div2);
	  a = document.getElementById('sentence').value;
	  document.getElementById('div2').innerHTML = a;
	  const nameCleaned = a.replace(/\s/g, '%20');
		let url = 'http://ink-ron.usc.edu:22015/predict?sentence='+nameCleaned;
		fetch(url)
		.then(res => res.json())
		.then((out) => {
			var length = geth(out);
			var input = document.createElement('input');	
			input.type = "range";
			input.className = "form-label";
			input.id = "customRange1";
			input.min = 0;
			input.max = length;
			input.value = 0;
			var s = "";
			input.addEventListener('input', function(){
				var number = geth(out)-Number(document.getElementById('customRange1').value)+1;
				if(number == length+1){
					s = "Here's the original sentence. "
				}
				else{
					s = "Visualizing the " + number + "th layer";
				}
				document.getElementById('div2').innerHTML = "";
				document.getElementById('hint').innerHTML = s;
				traverse1(out, geth(out)-document.getElementById('customRange1').value+1)
			}, true);
			div1.appendChild(input);
			var sentence = document.createElement('div');
			sentence.id = "hint";
			sentence.innerHTML = s;
			div1.appendChild(sentence);
			  $('body').tooltip({
				    selector: '.btn btn-secondary'
				});
		})
		.catch(err => { throw err });
		
  }
	
</script>

</body>
</html>